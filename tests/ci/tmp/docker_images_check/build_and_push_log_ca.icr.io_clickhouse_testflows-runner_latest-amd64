#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 32B 0.0s done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B 0.0s done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ubuntu:20.04
#3 DONE 0.0s

#4 [internal] load build context
#4 DONE 0.0s

#5 [ 1/10] FROM docker.io/library/ubuntu:20.04
#5 DONE 0.0s

#6 importing cache manifest from ca.icr.io/clickhouse/testflows-runner:latest
#6 ERROR: ca.icr.io/clickhouse/testflows-runner:latest: not found

#7 importing cache manifest from ca.icr.io/clickhouse/testflows-runner:latest-amd64
#7 ERROR: ca.icr.io/clickhouse/testflows-runner:latest-amd64: not found

#8 [ 2/10] RUN sed -i "s|http://archive.ubuntu.com|http://archive.ubuntu.com|g" /etc/apt/sources.list
#8 CACHED

#9 [ 3/10] RUN apt-get update     && env DEBIAN_FRONTEND=noninteractive apt-get install --yes     ca-certificates     bash     btrfs-progs     e2fsprogs     iptables     xfsprogs     tar     pigz     wget     git     iproute2     cgroupfs-mount     python3-pip     tzdata     libicu-dev     bsdutils     curl     liblua5.1-dev     luajit     libssl-dev     libcurl4-openssl-dev     gdb     && rm -rf         /var/lib/apt/lists/*         /var/cache/debconf         /tmp/*     && apt-get clean
#9 CACHED

#10 [ 4/10] RUN ln -snf /usr/share/zoneinfo/Europe/Moscow /etc/localtime && echo Europe/Moscow > /etc/timezone
#10 CACHED

#4 [internal] load build context
#4 transferring context: 121B 0.0s done
#4 DONE 0.0s

#11 [ 5/10] RUN pip3 install urllib3 testflows==1.7.20 docker-compose==1.29.1 docker==5.0.0 dicttoxml kazoo tzlocal==2.1 pytz python-dateutil numpy
#11 1.326 Collecting urllib3
#11 1.477   Downloading urllib3-1.26.9-py2.py3-none-any.whl (138 kB)
#11 1.714 Collecting testflows==1.7.20
#11 1.752   Downloading testflows-1.7.20.tar.gz (3.1 kB)
#11 2.067 Collecting docker-compose==1.29.1
#11 2.104   Downloading docker_compose-1.29.1-py2.py3-none-any.whl (114 kB)
#11 2.219 Collecting docker==5.0.0
#11 2.262   Downloading docker-5.0.0-py2.py3-none-any.whl (146 kB)
#11 2.352 Collecting dicttoxml
#11 2.387   Downloading dicttoxml-1.7.4.tar.gz (18 kB)
#11 2.633 Collecting kazoo
#11 2.670   Downloading kazoo-2.8.0-py2.py3-none-any.whl (142 kB)
#11 2.775 Collecting tzlocal==2.1
#11 2.810   Downloading tzlocal-2.1-py2.py3-none-any.whl (16 kB)
#11 3.007 Collecting pytz
#11 3.042   Downloading pytz-2022.1-py2.py3-none-any.whl (503 kB)
#11 3.259 Collecting python-dateutil
#11 3.294   Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)
#11 3.833 Collecting numpy
#11 3.871   Downloading numpy-1.22.4-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (16.9 MB)
#11 4.652 Collecting testflows.asserts==6.3.210714.1191517
#11 4.688   Downloading testflows.asserts-6.3.210714.1191517.tar.gz (13 kB)
#11 4.936 Collecting testflows.asyncio==1.1.210505.1133510
#11 4.973   Downloading testflows.asyncio-1.1.210505.1133510.tar.gz (2.6 kB)
#11 5.263 Collecting testflows.connect==1.7.210510.1164004
#11 5.300   Downloading testflows.connect-1.7.210510.1164004.tar.gz (6.1 kB)
#11 5.610 Collecting testflows.core==1.7.210731.1001923
#11 5.648   Downloading testflows.core-1.7.210731.1001923.tar.gz (1.1 MB)
#11 6.063 Collecting testflows.database==1.6.200713.1142213
#11 6.099   Downloading testflows.database-1.6.200713.1142213.tar.gz (8.4 kB)
#11 6.381 Collecting testflows.uexpect==1.6.210510.1163818
#11 6.424   Downloading testflows.uexpect-1.6.210510.1163818.tar.gz (4.4 kB)
#11 6.666 Collecting dockerpty<1,>=0.4.1
#11 6.702   Downloading dockerpty-0.4.1.tar.gz (13 kB)
#11 6.967 Collecting websocket-client<1,>=0.32.0
#11 7.005   Downloading websocket_client-0.59.0-py2.py3-none-any.whl (67 kB)
#11 7.098 Collecting jsonschema<4,>=2.5.1
#11 7.135   Downloading jsonschema-3.2.0-py2.py3-none-any.whl (56 kB)
#11 7.224 Collecting texttable<2,>=0.9.0
#11 7.261   Downloading texttable-1.6.4-py2.py3-none-any.whl (10 kB)
#11 7.325 Collecting distro<2,>=1.5.0
#11 7.361   Downloading distro-1.7.0-py3-none-any.whl (20 kB)
#11 7.419 Collecting docopt<1,>=0.6.1
#11 7.454   Downloading docopt-0.6.2.tar.gz (25 kB)
#11 7.741 Collecting requests<3,>=2.20.0
#11 7.777   Downloading requests-2.28.0-py3-none-any.whl (62 kB)
#11 7.860 Collecting python-dotenv<1,>=0.13.0
#11 7.899   Downloading python_dotenv-0.20.0-py3-none-any.whl (17 kB)
#11 8.027 Collecting PyYAML<6,>=3.10
#11 8.064   Downloading PyYAML-5.4.1-cp38-cp38-manylinux1_x86_64.whl (662 kB)
#11 8.161 Collecting six
#11 8.196   Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)
#11 8.270 Collecting attrs>=17.4.0
#11 8.306   Downloading attrs-21.4.0-py2.py3-none-any.whl (60 kB)
#11 8.454 Collecting pyrsistent>=0.14.0
#11 8.490   Downloading pyrsistent-0.18.1-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (119 kB)
#11 8.509 Requirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose==1.29.1) (45.2.0)
#11 8.577 Collecting certifi>=2017.4.17
#11 8.614   Downloading certifi-2022.5.18.1-py3-none-any.whl (155 kB)
#11 8.698 Collecting charset-normalizer~=2.0.0
#11 8.733   Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)
#11 8.806 Collecting idna<4,>=2.5
#11 8.841   Downloading idna-3.3-py3-none-any.whl (61 kB)
#11 8.856 Building wheels for collected packages: testflows, dicttoxml, testflows.asserts, testflows.asyncio, testflows.connect, testflows.core, testflows.database, testflows.uexpect, dockerpty, docopt
#11 8.856   Building wheel for testflows (setup.py): started
#11 9.090   Building wheel for testflows (setup.py): finished with status 'done'
#11 9.091   Created wheel for testflows: filename=testflows-1.7.20-py3-none-any.whl size=2913 sha256=cd47dc96d4ef835b11ceb243e5511290d231a6a42135f4082c123ed050b7dc57
#11 9.091   Stored in directory: /root/.cache/pip/wheels/c9/6a/e0/6001e7dbe1496ee26907b1728c32a8d654df7d350c28a3b854
#11 9.093   Building wheel for dicttoxml (setup.py): started
#11 9.318   Building wheel for dicttoxml (setup.py): finished with status 'done'
#11 9.318   Created wheel for dicttoxml: filename=dicttoxml-1.7.4-py3-none-any.whl size=17451 sha256=39013bb6747d33b961edfca16ac830dba88966eb020bc1e024f1f9eda2625b2a
#11 9.318   Stored in directory: /root/.cache/pip/wheels/6c/32/1d/09f338b837cdbb71f8889b866d50db3e0eaa02b8fc2be4c943
#11 9.320   Building wheel for testflows.asserts (setup.py): started
#11 9.565   Building wheel for testflows.asserts (setup.py): finished with status 'done'
#11 9.565   Created wheel for testflows.asserts: filename=testflows.asserts-6.3.210714.1191517-py3-none-any.whl size=12429 sha256=9b5d9e8e21ba531d485f13871a9367ad08d19e1e3f5e2711fb684b6098df5c9e
#11 9.565   Stored in directory: /root/.cache/pip/wheels/7d/52/7f/51f6818a0685979e93f9c3ca1e4cdd06efa7d98c257d018189
#11 9.567   Building wheel for testflows.asyncio (setup.py): started
#11 9.787   Building wheel for testflows.asyncio (setup.py): finished with status 'done'
#11 9.787   Created wheel for testflows.asyncio: filename=testflows.asyncio-1.1.210505.1133510-py3-none-any.whl size=3875 sha256=fd327aada3934fe06dc29e1498e3a12488d404a4790a26933e3fd961028b9829
#11 9.787   Stored in directory: /root/.cache/pip/wheels/ea/51/3a/9bb147da478f7019555cdf598cb48657e8819ecdd1268d35d2
#11 9.789   Building wheel for testflows.connect (setup.py): started
#11 10.03   Building wheel for testflows.connect (setup.py): finished with status 'done'
#11 10.03   Created wheel for testflows.connect: filename=testflows.connect-1.7.210510.1164004-py3-none-any.whl size=7463 sha256=10ebb078d8b7df4b6269526646879fc577a37002fc476b1306676d4f54622965
#11 10.03   Stored in directory: /root/.cache/pip/wheels/c2/0a/63/4625027819e6574c3a79496fd9e2db1083ca1b19004dbf5d83
#11 10.03   Building wheel for testflows.core (setup.py): started
#11 10.63   Building wheel for testflows.core (setup.py): finished with status 'done'
#11 10.63   Created wheel for testflows.core: filename=testflows.core-1.7.210731.1001923-py3-none-any.whl size=1345569 sha256=2853b9802b09e156845b6a03b0945061cf2e928fe83bd9e4ea58c14469cd7c3b
#11 10.63   Stored in directory: /root/.cache/pip/wheels/0c/02/16/c3f031de292b97e52396eefb8331f1eccf0fe136c6492e5f6b
#11 10.64   Building wheel for testflows.database (setup.py): started
#11 10.87   Building wheel for testflows.database (setup.py): finished with status 'done'
#11 10.87   Created wheel for testflows.database: filename=testflows.database-1.6.200713.1142213-py3-none-any.whl size=16113 sha256=5c67d920f469652992fd473ba4160018b49b108ec5b8ae95a3d2f553b2449170
#11 10.87   Stored in directory: /root/.cache/pip/wheels/37/69/59/36a21d5fed8744b6ae60e71473fc20aef8ceb2d783197744e4
#11 10.87   Building wheel for testflows.uexpect (setup.py): started
#11 11.10   Building wheel for testflows.uexpect (setup.py): finished with status 'done'
#11 11.10   Created wheel for testflows.uexpect: filename=testflows.uexpect-1.6.210510.1163818-py3-none-any.whl size=5643 sha256=d71f581f34b7a94dcab4b47be655f944656c0153526f1e50c9ed4b7c0a904811
#11 11.10   Stored in directory: /root/.cache/pip/wheels/8e/e1/16/230fa3e4a87b1b728c5e7dc2a76204e121ae007398c7c76c1f
#11 11.10   Building wheel for dockerpty (setup.py): started
#11 11.33   Building wheel for dockerpty (setup.py): finished with status 'done'
#11 11.33   Created wheel for dockerpty: filename=dockerpty-0.4.1-py3-none-any.whl size=16604 sha256=b82f0339a609261d26750357f12d1258396dbfb3c62f2bb311710dfea25612bc
#11 11.33   Stored in directory: /root/.cache/pip/wheels/1a/58/0d/9916bf3c72e224e038beb88f669f68b61d2f274df498ff87c6
#11 11.33   Building wheel for docopt (setup.py): started
#11 11.55   Building wheel for docopt (setup.py): finished with status 'done'
#11 11.55   Created wheel for docopt: filename=docopt-0.6.2-py2.py3-none-any.whl size=13704 sha256=80ba4b7b115e0c70469d1ecff9654f042c55269c0f2ec48aecea98a250c2421c
#11 11.55   Stored in directory: /root/.cache/pip/wheels/56/ea/58/ead137b087d9e326852a851351d1debf4ada529b6ac0ec4e8c
#11 11.55 Successfully built testflows dicttoxml testflows.asserts testflows.asyncio testflows.connect testflows.core testflows.database testflows.uexpect dockerpty docopt
#11 11.70 Installing collected packages: urllib3, testflows.asserts, testflows.asyncio, testflows.connect, testflows.core, certifi, charset-normalizer, idna, requests, testflows.database, testflows.uexpect, testflows, six, dockerpty, websocket-client, attrs, pyrsistent, jsonschema, texttable, distro, docopt, python-dotenv, docker, PyYAML, docker-compose, dicttoxml, kazoo, pytz, tzlocal, python-dateutil, numpy
#11 15.83 Successfully installed PyYAML-5.4.1 attrs-21.4.0 certifi-2022.5.18.1 charset-normalizer-2.0.12 dicttoxml-1.7.4 distro-1.7.0 docker-5.0.0 docker-compose-1.29.1 dockerpty-0.4.1 docopt-0.6.2 idna-3.3 jsonschema-3.2.0 kazoo-2.8.0 numpy-1.22.4 pyrsistent-0.18.1 python-dateutil-2.8.2 python-dotenv-0.20.0 pytz-2022.1 requests-2.28.0 six-1.16.0 testflows-1.7.20 testflows.asserts-6.3.210714.1191517 testflows.asyncio-1.1.210505.1133510 testflows.connect-1.7.210510.1164004 testflows.core-1.7.210731.1001923 testflows.database-1.6.200713.1142213 testflows.uexpect-1.6.210510.1163818 texttable-1.6.4 tzlocal-2.1 urllib3-1.26.9 websocket-client-0.59.0
#11 DONE 16.4s

#12 [ 6/10] RUN arch=amd64   && case $arch in       amd64) rarch=x86_64 ;;       arm64) rarch=aarch64 ;;     esac   && set -eux   && if ! wget -nv -O docker.tgz "https://download.docker.com/linux/static/stable/${rarch}/docker-20.10.6.tgz"; then     echo >&2 "error: failed to download 'docker-20.10.6' from 'stable' for '${rarch}'"     && exit 1;   fi   && tar --extract     --file docker.tgz     --strip-components 1     --directory /usr/local/bin/   && rm docker.tgz   && dockerd --version   && docker --version
#12 0.451 + wget -nv -O docker.tgz https://download.docker.com/linux/static/stable/x86_64/docker-20.10.6.tgz
#12 1.705 2022-06-14 20:20:52 URL:https://download.docker.com/linux/static/stable/x86_64/docker-20.10.6.tgz [69637582/69637582] -> "docker.tgz" [1]
#12 1.706 + tar --extract --file docker.tgz --strip-components 1 --directory /usr/local/bin/
#12 3.252 + rm docker.tgz
#12 3.264 + dockerd --version
#12 3.817 Docker version 20.10.6, build 8728dd2
#12 3.823 + docker --version
#12 4.243 Docker version 20.10.6, build 370c289
#12 DONE 4.7s

#13 [ 7/10] COPY modprobe.sh /usr/local/bin/modprobe
#13 DONE 0.1s

#14 [ 8/10] COPY dockerd-entrypoint.sh /usr/local/bin/
#14 DONE 0.1s

#15 [ 9/10] COPY process_testflows_result.py /usr/local/bin/
#15 DONE 0.1s

#16 [10/10] RUN set -x   && addgroup --system dockremap     && adduser --system dockremap   && adduser dockremap dockremap   && echo 'dockremap:165536:65536' >> /etc/subuid     && echo 'dockremap:165536:65536' >> /etc/subgid
#16 0.348 + addgroup --system dockremap
#16 0.407 Adding group `dockremap' (GID 102) ...
#16 0.437 Done.
#16 0.440 + adduser --system dockremap
#16 0.473 Adding system user `dockremap' (UID 101) ...
#16 0.473 Adding new user `dockremap' (UID 101) with group `nogroup' ...
#16 0.534 Creating home directory `/home/dockremap' ...
#16 0.536 + adduser dockremap dockremap
#16 0.576 Adding user `dockremap' to group `dockremap' ...
#16 0.583 Adding user dockremap to group dockremap
#16 0.598 Done.
#16 0.601 + echo dockremap:165536:65536
#16 0.601 + echo dockremap:165536:65536
#16 DONE 0.7s

#17 exporting to image
#17 exporting layers done
#17 writing image sha256:7f3df298b3ca16f9e1af67bdd4d541ed2f8810d7bec0463547edf560e1bd05f4
#17 writing image sha256:7f3df298b3ca16f9e1af67bdd4d541ed2f8810d7bec0463547edf560e1bd05f4 done
#17 naming to ca.icr.io/clickhouse/testflows-runner:latest-amd64 done
#17 DONE 0.0s

#18 exporting cache
#18 preparing build cache for export done
#18 DONE 0.0s

#19 pushing ca.icr.io/clickhouse/testflows-runner:latest-amd64 with docker
#19 pushing layer a5b7d3cb1867
#19 pushing layer 390a2aca82e7
#19 pushing layer 188092b0faf9
#19 pushing layer 422eb74c530d
#19 pushing layer eb6c245d8538
#19 pushing layer 7523ff4c889e 1.0s
#19 pushing layer bba54b89c9ed 1.0s
#19 pushing layer e4d81ebf4a20 1.0s
#19 pushing layer 032fbcaef3aa 1.0s
#19 pushing layer bf8cedc62fb3 1.0s
#19 pushing layer 422eb74c530d 512B / 605B 1.6s
#19 pushing layer 188092b0faf9 4.10kB / 925B 2.7s
#19 pushing layer 422eb74c530d 4.10kB / 605B 2.6s
#19 pushing layer a5b7d3cb1867 51.71kB / 37.88kB 2.9s
#19 pushing layer 390a2aca82e7 5.63kB / 2.31kB 3.0s
#19 pushing layer eb6c245d8538 13.90MB / 235.22MB 10.8s
#19 pushing layer eb6c245d8538 27.82MB / 235.22MB 16.3s
#19 pushing layer 422eb74c530d 5.8s done
#19 pushing layer eb6c245d8538 40.62MB / 235.22MB 20.7s
#19 pushing layer a5b7d3cb1867 6.0s done
#19 pushing layer bba54b89c9ed 3.07kB / 14B 6.3s
#19 pushing layer 7523ff4c889e 5.55MB / 108.92MB 8.8s
#19 pushing layer eb6c245d8538 53.99MB / 235.22MB 29.6s
#19 pushing layer 7523ff4c889e 11.68MB / 108.92MB 12.1s
#19 pushing layer 7523ff4c889e 17.25MB / 108.92MB 15.4s
#19 pushing layer 390a2aca82e7 7.6s done
#19 pushing layer 188092b0faf9 7.7s done
#19 pushing layer eb6c245d8538 66.23MB / 235.22MB 37.4s
#19 pushing layer 7523ff4c889e 23.77MB / 108.92MB 19.8s
#19 pushing layer 032fbcaef3aa 5.63kB / 2.74kB 8.0s
#19 pushing layer bba54b89c9ed 9.4s done
#19 pushing layer eb6c245d8538 80.69MB / 235.22MB 44.1s
#19 pushing layer 7523ff4c889e 30.72MB / 108.92MB 24.2s
#19 pushing layer e4d81ebf4a20 524.80kB / 547.81MB 7.5s
#19 pushing layer 7523ff4c889e 37.39MB / 108.92MB 27.5s
#19 pushing layer 7523ff4c889e 44.93MB / 108.92MB 31.9s
#19 pushing layer eb6c245d8538 93.51MB / 235.22MB 53.0s
#19 pushing layer 032fbcaef3aa 10.5s done
#19 pushing layer 7523ff4c889e 51.37MB / 108.92MB 36.3s
#19 pushing layer bf8cedc62fb3 8.9s
#19 pushing layer 7523ff4c889e 57.93MB / 108.92MB 40.8s
#19 pushing layer eb6c245d8538 108.55MB / 235.22MB 60.7s
#19 pushing layer 7523ff4c889e 63.95MB / 108.92MB 44.1s
#19 pushing layer e4d81ebf4a20 28.38MB / 547.81MB 26.5s
#19 pushing layer 7523ff4c889e 71.19MB / 108.92MB 47.4s
#19 pushing layer eb6c245d8538 122.47MB / 235.22MB 68.4s
#19 pushing layer 7523ff4c889e 78.43MB / 108.92MB 50.7s
#19 pushing layer 7523ff4c889e 84.56MB / 108.92MB 54.0s
#19 pushing layer eb6c245d8538 139.15MB / 235.22MB 75.0s
#19 pushing layer 7523ff4c889e 90.13MB / 108.92MB 58.4s
#19 pushing layer 7523ff4c889e 97.30MB / 108.92MB 62.9s
#19 pushing layer e4d81ebf4a20 56.72MB / 547.81MB 44.2s
#19 pushing layer eb6c245d8538 153.06MB / 235.22MB 84.9s
#19 pushing layer 7523ff4c889e 103.76MB / 108.92MB 67.3s
#19 pushing layer 7523ff4c889e 110.75MB / 108.92MB 71.7s
#19 pushing layer eb6c245d8538 166.43MB / 235.22MB 93.8s
#19 pushing layer e4d81ebf4a20 85.28MB / 547.81MB 60.7s
#19 pushing layer eb6c245d8538 183.14MB / 235.22MB 101.7s
#19 pushing layer eb6c245d8538 196.51MB / 235.22MB 108.4s
#19 pushing layer 7523ff4c889e 76.0s done
#19 pushing layer e4d81ebf4a20 114.35MB / 547.81MB 77.2s
#19 pushing layer eb6c245d8538 211.55MB / 235.22MB 116.1s
#19 pushing layer eb6c245d8538 224.86MB / 235.22MB 121.6s
#19 pushing layer e4d81ebf4a20 142.14MB / 547.81MB 93.9s
#19 pushing layer e4d81ebf4a20 170.45MB / 547.81MB 109.4s
#19 pushing layer eb6c245d8538 131.5s done
#19 pushing layer e4d81ebf4a20 198.62MB / 547.81MB 123.7s
#19 pushing layer e4d81ebf4a20 227.42MB / 547.81MB 140.5s
#19 pushing layer e4d81ebf4a20 255.11MB / 547.81MB 159.4s
#19 pushing layer e4d81ebf4a20 283.57MB / 547.81MB 177.1s
#19 pushing layer e4d81ebf4a20 311.16MB / 547.81MB 192.7s
#19 pushing layer e4d81ebf4a20 338.85MB / 547.81MB 208.2s
#19 pushing layer e4d81ebf4a20 366.95MB / 547.81MB 225.8s
#19 pushing layer e4d81ebf4a20 395.90MB / 547.81MB 241.3s
#19 pushing layer e4d81ebf4a20 424.76MB / 547.81MB 256.8s
#19 pushing layer e4d81ebf4a20 453.35MB / 547.81MB 273.4s
#19 pushing layer e4d81ebf4a20 483.17MB / 547.81MB 291.2s
#19 pushing layer e4d81ebf4a20 512.04MB / 547.81MB 307.8s
#19 pushing layer e4d81ebf4a20 541.57MB / 547.81MB 325.6s
#19 pushing layer e4d81ebf4a20 340.1s done
#19 pushing layer bf8cedc62fb3 49.4s done
#19 DONE 46.6s
------
 > importing cache manifest from ca.icr.io/clickhouse/testflows-runner:latest-amd64:
------
------
 > importing cache manifest from ca.icr.io/clickhouse/testflows-runner:latest:
------
